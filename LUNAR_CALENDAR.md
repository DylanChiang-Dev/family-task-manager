# 農曆日期顯示功能

## 功能概述

系統現在支持在日曆上同時顯示公曆（陽曆）和農曆（陰曆）日期，方便家庭成員查看傳統節日和重要日子。

## 顯示效果

每個日期格子會顯示：
- **公曆日期**：較大的數字（如：15）
- **農曆日期**：較小的灰色文字（如：初一、十五、廿一）

選中日期時，農曆文字會變為藍色調，與選中狀態保持一致。

## 農曆日期命名規則

### 月份名稱
- 正月、二月、三月、四月、五月、六月
- 七月、八月、九月、十月、冬月、臘月

### 日期名稱
- **1-10日**：初一、初二、初三...初十
- **11-20日**：十一、十二、十三...二十
- **21-30日**：廿一、廿二、廿三...三十

## 技術實現

### 本地農曆轉換庫

文件：`public/js/lunar.js`

#### 核心特性
1. **準確性**：基於中國傳統農曆算法
2. **時間跨度**：支持 1900-2100 年（200年）
3. **閏月處理**：自動處理閏月和大小月
4. **無依賴**：純 JavaScript 實現，無需外部庫

#### 主要函數

```javascript
LunarCalendar.solarToLunar(year, month, day)
```

**參數**：
- `year`: 公曆年份（1900-2100）
- `month`: 公曆月份（1-12）
- `day`: 公曆日期（1-31）

**返回值**：
```javascript
{
    year: 2025,           // 農曆年份
    month: '正月',        // 農曆月份名稱
    day: '初五',          // 農曆日期名稱
    isLeap: false        // 是否閏月
}
```

### 算法原理

1. **基準日期**：1900年1月31日（農曆正月初一）
2. **偏移計算**：計算目標日期與基準日期的天數差
3. **農曆年份**：逐年累加農曆年天數，確定農曆年份
4. **農曆月份**：逐月累加月份天數，確定農曆月份
5. **閏月判斷**：根據年份數據判斷是否有閏月及閏月位置

### 數據結構

`lunarInfo` 數組存儲每年的農曆信息：
- 每個元素對應一年（1900-2100）
- 16進制數字編碼月份大小和閏月信息
- 高位：閏月天數（29/30天）
- 低4位：閏月月份（0=無閏月）
- 中間12位：12個月的大小（1=大月30天，0=小月29天）

## 傳統節日參考

農曆日期可用於標記傳統節日：

### 固定農曆日期的節日
- **正月初一**：春節（農曆新年）
- **正月十五**：元宵節
- **五月初五**：端午節
- **七月初七**：七夕節
- **八月十五**：中秋節
- **九月初九**：重陽節
- **臘月初八**：臘八節
- **臘月廿三/廿四**：小年
- **臘月三十**：除夕（大年三十）

### 節氣和其他日期
系統目前僅顯示農曆日期，未包含節氣計算。

## 使用建議

1. **家庭生日**：許多長輩習慣記農曆生日，可在任務中備註
2. **傳統節日**：創建週期任務提醒傳統節日
3. **祭祀日期**：記錄重要的農曆紀念日

## 已知限制

1. **時間範圍**：僅支持 1900-2100 年
2. **節氣功能**：未實現24節氣計算
3. **天干地支**：未顯示生肖年份和天干地支

## 未來改進方向

- [ ] 添加節氣顯示（立春、清明、冬至等）
- [ ] 標記重要傳統節日（用不同顏色）
- [ ] 顯示生肖年份
- [ ] 農曆節日自動提醒功能

## 參考資料

- 中國農曆算法基於傳統曆法規則
- 數據來源：中國科學院紫金山天文台曆法資料
- 算法參考：《中國天文年曆》計算方法
